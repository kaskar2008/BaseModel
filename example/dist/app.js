!function e(t,r,o){function n(s,a){if(!r[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return n(r||e)},c,c.exports,e,t,r,o)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)n(o[s]);return n}({1:[function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0}),r.BaseModel=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),s=e("./addons.js");r.BaseModel=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,e),this.default_context="default",this._fields={},this._loaded={},this._loaded[this.default_context]={},this.parent=t||null,this.load(this.default_context,r),this.processors={},this.addFieldProcessorsBulk({nullable:function(e){return e||null},int:function(e){return e&&parseInt(e)?parseInt(e):0},string:function(e){return"string"==typeof e?e:e?""+e:""},array:function(e){return Array.isArray(e)?e:[]},bool:function(e){return!!e},usd:function(e){return"NaN"!=e.toString()&&e.toString().indexOf("$")<0?e+"$":e},kzt:function(e){return"NaN"!=e.toString()&&e.toString().indexOf("₸")<0?e+"₸":e}})}return i(e,[{key:"createProcessorCallie",value:function(e){var t=this,r=e.split(".");return function(e){var o=!1,n=e,i=!0,s=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;if(c.indexOf(":")>=0){var d=c.split(":"),f=d[0],h=JSON.parse(d[1]);if(t.modifiers[f]){var p=t.modifiers[f](n,h);n=p.value||n,o=p.break||o}if(o)break}else n=t.proceedProcessor(c,n)}}catch(e){s=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw a}}return n}}},{key:"proceedProcessor",value:function(e,t){return this.processors[e]?this.processors[e](t):void 0}},{key:"getProcessor",value:function(e){if(!(e.indexOf("@")>=0))return e;var t=e.split("."),r=t[0].replace("@",""),o=this._fields[r]||null,n=t.slice(-1).join(""),i=t.slice(1,-1).join("."),a=(0,s.fromDot)(o,i);if(a){var l=a[n];return this.getProcessor(l)}console.error("BaseModel::getProcessor() Model "+e+" not found")}},{key:"addModifier",value:function(e){var t=e.name||null,r=e.proc||null;return t&&r?(this.modifiers[t]=r,this):(console.error("\n        BaseAjax::addModifier()\n        You should specify both name and callback\n      "),!1)}},{key:"addFieldProcessor",value:function(e){var t=e.name||null,r=e.proc||null;return t&&r?(this.processors[t]=r,this):(console.error("\n        BaseModel::addFieldProcessor()\n        You should specify both name and callback\n      "),!1)}},{key:"addFieldProcessorsBulk",value:function(e){return this.processors=Object.assign(this.processors||{},e),this}},{key:"addModifiersBulk",value:function(e){return this.modifiers=Object.assign(this.modifiers||{},e),this}},{key:"load",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._loaded[e]&&this._loaded[e].data?(this._loaded[e].data=Object.assign(this._loaded[e].data||{},t),this._loaded[e].is_cameled=r):this._loaded[e]={data:t,is_cameled:r},this}},{key:"update",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.loaded[e])if(null!==t&&"object"===(void 0===t?"undefined":n(t)))for(var o in t)this.loaded[e].data[o]=t[o];else this.loaded[e].data[t]=r;return this}},{key:"setFieldsNames",value:function(e,t){if(!t&&e instanceof Object)t=e,e=this.default_context;else if(!t&&!e)return!1;return this._fields[e]=t||{},this}},{key:"setFieldsNamesBulk",value:function(e){return!e instanceof Object?void console.error("BaseModel::setFieldsNamesBulk() data must be an instance of the Object"):(Object.assign(this._fields,e),this)}},{key:"generateQuery",value:function(e){var t=this,r=e.uri,o=e.method||"GET",n=e.model||null,i=n?JSON.stringify(this.getFields(n)):e.data||null,s=e.mode,a=e.headers||{},l=e.credentials,u=e.check||"status";return function(e,n,c,d){return fetch(r,{headers:new Headers(Object.assign({},a)),credentials:l,method:o,mode:s,body:i}).then(function(r){return t.interceptor&&t.interceptor(r),c&&c(r),r.ok?r.json().then(function(t){t[u]?e(t):n&&n(t)}):void(d&&d(r))}).catch(function(e){t.interceptor&&t.interceptor(e),c&&c(),d&&d(e)}),t}}},{key:"getFieldFromContainer",value:function(e,t){var r=this.loaded[e]?this.loaded[e].data:null;return r||console.error("BaseModel::getFieldFromContainer() Group "+e+" not found"),(0,s.fromDot)(r,t)}},{key:"parseCondition",value:function(e){var t=e.split(" ");for(var r in t){var o=t[r].split(".");if(o.length){var n=o.slice(1,-1).join("."),i=o.slice(-1).join("");if("^"==o[0]&&(t[r]=(0,s.fromDot)(this.parent,n)[i]),"&"==o[0]&&(t[r]=(0,s.fromDot)(this,n)[i]),"@"==o[0]){var a=o[0].replace("@","");t[r]=this.getFieldFromContainer(a,n)[i]}}}return e=t.join(" "),Function.apply(null,[].concat("return "+e))()}},{key:"getFields",value:function(e){e=e||this.default_context;var t=this;if(!Object.keys(this._fields[e]||[]).length)return console.error("\n        BaseModel::getFields()\n        You have to specify the field names through the\n        setFieldsNames() method\n      "),{};if(!this._fields[e])return this.loaded[e]||{};var r={};return Object.keys(this._fields[e]).map(function(o){var n=t.loaded[e]||{},i=n.data,a=o,l=o,u=null,c=null,d=!1,f=o.match(/if\((.+)\)/i),h=!0;if(f&&f.length>1&&(h=t.parseCondition(f[1])),h){if(o.indexOf(".")>=0){var p=o.split(" ")[0],y=p.split(".");if(l=y.slice(-1).join(""),"^"==y[0]||"&"==y[0]||0===y[0].indexOf("@")){d=!0;var v=y.slice(1,-1).join(".");if(0===y[0].indexOf("@")){var m=y[0].replace("@","");i=t.getFieldFromContainer(m,v)}else"^"==y[0]&&t.parent?i=(0,s.fromDot)(t.parent,v):"&"==y[0]&&(i=(0,s.fromDot)(t,v))}i||console.error("BaseModel::getFields() Field "+o+" not found"),c=i[l],a=l}var b=o.replace(/if\((.+)\)/gi,"").trim();if(b.indexOf(" as ")>=0){var g=b.split(" as ");d||(l=g[0]),a=g[1]}u=d?c:i[n.is_cameled?(0,s.pascalize)(l):l];var _=t.getProcessor(t._fields[e][o]),k=t.createProcessorCallie(_);r[a]=k?k(u):u}}),r}},{key:"loaded",get:function(){return this._loaded||{}}}]),e}()},{"./addons.js":2}],2:[function(e,t,r){"use strict";function o(e){return a(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}function n(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function i(e){var t=o(e);return t.substr(0,1).toUpperCase()+t.substr(1)}function s(e,t){return t?t.split(".").reduce(function(e,t){return"object"===(void 0===e?"undefined":c(e))?e[t]:e},e):e}function a(e){return(e-=0)===e}function l(e,t){t=t||{};var r=t.separator||"_",o=t.split||/(?=[A-Z])/;return e.split(o).join(r)}function u(e,t){return l(e,t).toLowerCase()}Object.defineProperty(r,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.camelize=o,r.getRandom=n,r.pascalize=i,r.fromDot=s,r._isNumerical=a,r.separateWords=l,r.decamelize=u},{}],3:[function(e,t,r){"use strict";var o=e("./models/PostModel.js"),n=new o.PostModel;n.load("user",{id:25654,name:"John Doe"}),n.load("create",{text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit."}).create(function(e){console.log("good")},function(e){console.log("bad")})},{"./models/PostModel.js":4}],4:[function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.PostModel=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),a=e("../../classes/BaseModelClass.js");r.PostModel=function(e){function t(){o(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.setFieldsNamesBulk({user:{id:"int",name:"string"},create:{"@user.id as author_id":"int","text as content if(&.check1 == true)":"string.strip:15","&.isSeo as is_seo":"allow:[null].bool"}}),e.addModifiersBulk({strip:function(e,t){return{value:e.substr(0,t)}},allow:function(e,t){return{break:t.indexOf(e)>=0}}}),e}return i(t,e),s(t,[{key:"create",value:function(e,t,r,o){this.generateQuery({uri:"localhost/api/v2/post",method:"POST",model:"create"})(e,t,r,o)}},{key:"check1",get:function(){return 1==this.isSeo}},{key:"isSeo",get:function(){return!0}}]),t}(a.BaseModel)},{"../../classes/BaseModelClass.js":1}]},{},[3]);