!function e(t,n,r){function o(i,a){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.BaseModel=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./addons.js");n.BaseModel=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,e),this.default_context="default",this.parent=t||null,this.load(n),this.processors={},this.addFieldProcessorsBulk({int:function(e){return parseInt(e)},string:function(e){return"string"==typeof e?e:e?""+e:""},array:function(e){return Array.isArray(e)?e:[]},usd:function(e){return"NaN"!=e.toString()&&e.toString().indexOf("$")<0?e+"$":e},kzt:function(e){return"NaN"!=e.toString()&&e.toString().indexOf("₸")<0?e+"₸":e}}),this._fields={}}return o(e,[{key:"createProcessorCallie",value:function(e){var t=this;return e=e.split("."),function(n){var r=n;return e.forEach(function(e){r=t.proceedProcessor(e,r)}),r}}},{key:"proceedProcessor",value:function(e,t){if(this.processors[e])return this.processors[e](t)}},{key:"addFieldProcessor",value:function(e){var t=e.name||null,n=e.proc||null;if(!t||!n)return console.error("\n        BaseAjax::addFieldProcessor()\n        You should specify both name and callback\n      "),!1;this.processors[t]=n}},{key:"addFieldProcessorsBulk",value:function(e){this.processors=Object.assign(this.processors||{},e)}},{key:"load",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._loaded=e||null,this.is_cameled=t,this}},{key:"setFieldsNames",value:function(e,t){if(!t&&e instanceof Object)t=e,e=this.default_context;else if(!t&&!e)return!1;this._fields[e]=t||{}}},{key:"setFieldsNamesBulk",value:function(e){if(!e instanceof Object)return void console.error("BaseModel::setFieldsNamesBulk() data must be an instance of the Object");Object.assign(this._fields,e)}},{key:"generateQuery",value:function(e){var t=this,n=e.uri,r=e.method||"GET",o=e.model||null,s=o?JSON.stringify(this.getFields(o)):e.data||null;return function(e,o){return t.parent?(fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"include",method:r,body:s}).then(function(t){return t.ok?t.json().then(function(t){t.status?e(t):o&&o(t)}):(o&&o(),!1)}).catch(function(e){o&&o()}),t):(console.error(self.constructor.name+": Parent is not configured"),t)}}},{key:"getFields",value:function(e){e=e||this.default_context;var t=this;if(!this._fields[e]&&!Object.keys(this._fields[e]||[]).length)return console.error("\n        BaseAjax::getFields()\n        You have to specify the field names through the\n        setFieldsNames() method\n      "),{};var n={};return Object.keys(this._fields[e]).map(function(r){var o=t.loaded,i=r,a=r,u=null,l=null,c=!1;if(r.indexOf(".")>=0){var f=r.split(" ")[0];a=f.split(".").slice(-1).join("");var d=f.split(".").slice(0,-1).join(".");o=(0,s.fromDot)(t.parent,d),o||console.error("BaseModel::getFields() Model "+r+" not found"),l=o[a],i=a,c=!0}if(r.indexOf(" as ")>=0){var p=r.split(" as ");c||(a=p[0]),i=p[1]}u=c?l:o[t.is_cameled?(0,s.pascalize)(a):a];var h=t._fields[e][r],y=t.createProcessorCallie(h);n[i]=y?y(u):u}),n}},{key:"loaded",get:function(){return this._loaded||null}}]),e}()},{"./addons.js":2}],2:[function(e,t,n){"use strict";function r(e){return a(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),e.substr(0,1).toLowerCase()+e.substr(1))}function o(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function s(e){var t=r(e);return t.substr(0,1).toUpperCase()+t.substr(1)}function i(e,t){return t?t.split(".").reduce(function(e,t){return"object"===(void 0===e?"undefined":c(e))?e[t]:e},e):e}function a(e){return(e-=0)===e}function u(e,t){t=t||{};var n=t.separator||"_",r=t.split||/(?=[A-Z])/;return e.split(r).join(n)}function l(e,t){return u(e,t).toLowerCase()}Object.defineProperty(n,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.camelize=r,n.getRandom=o,n.pascalize=s,n.fromDot=i,n._isNumerical=a,n.separateWords=u,n.decamelize=l},{}],3:[function(e,t,n){"use strict";var r=e("./models/PostModel.js"),o={};o.user={id:25654,name:"John Doe"},o.post=new r.PostModel(o),o.post.load({phone:"555555555",email:"qwe@qwe.qw"},!1).save(function(e){console.log("good")},function(e){console.log("bad")})},{"./models/PostModel.js":4}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.PostModel=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../../classes/BaseModelClass.js");n.PostModel=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return s.setFieldsNames("save",{"user.id":"int",phone:"string","user.name as author":"string",email:"string"}),s}return s(t,e),i(t,[{key:"update",value:function(e){return this._loaded=e,this}},{key:"save",value:function(e,t){return this.generateQuery({uri:"/ajax/client",method:"POST",model:"save"})(e,t),this}}]),t}(a.BaseModel)},{"../../classes/BaseModelClass.js":1}]},{},[3]);